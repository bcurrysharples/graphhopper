


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > GtfsStorage</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">com.graphhopper.gtfs</a>
</div>

<h1>Coverage Summary for Class: GtfsStorage (com.graphhopper.gtfs)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">GtfsStorage</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/23)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/18)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/97)
  </span>
</td>
</tr>
  <tr>
    <td class="name">GtfsStorage$EdgeType</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">GtfsStorage$FeedIdWithStopId</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/10)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">GtfsStorage$FeedIdWithTimezone</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/7)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">GtfsStorage$PlatformDescriptor</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/5)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/17)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">GtfsStorage$RoutePlatform</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">GtfsStorage$RouteTypePlatform</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/10)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">GtfsStorage$Validity</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/6)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/48)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/62)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/157)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/*
&nbsp; *  Licensed to GraphHopper GmbH under one or more contributor
&nbsp; *  license agreements. See the NOTICE file distributed with this work for
&nbsp; *  additional information regarding copyright ownership.
&nbsp; *
&nbsp; *  GraphHopper GmbH licenses this file to you under the Apache License,
&nbsp; *  Version 2.0 (the &quot;License&quot;); you may not use this file except in
&nbsp; *  compliance with the License. You may obtain a copy of the License at
&nbsp; *
&nbsp; *       http://www.apache.org/licenses/LICENSE-2.0
&nbsp; *
&nbsp; *  Unless required by applicable law or agreed to in writing, software
&nbsp; *  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
&nbsp; *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
&nbsp; *  See the License for the specific language governing permissions and
&nbsp; *  limitations under the License.
&nbsp; */
&nbsp;
&nbsp;package com.graphhopper.gtfs;
&nbsp;
&nbsp;import com.carrotsearch.hppc.IntIntHashMap;
&nbsp;import com.carrotsearch.hppc.IntObjectHashMap;
&nbsp;import com.carrotsearch.hppc.cursors.IntIntCursor;
&nbsp;import com.carrotsearch.hppc.cursors.IntObjectCursor;
&nbsp;import com.conveyal.gtfs.GTFSFeed;
&nbsp;import com.conveyal.gtfs.model.Fare;
&nbsp;import com.graphhopper.storage.Directory;
&nbsp;import com.graphhopper.storage.index.LineIntIndex;
&nbsp;import org.mapdb.DB;
&nbsp;import org.mapdb.DBMaker;
&nbsp;import org.slf4j.Logger;
&nbsp;import org.slf4j.LoggerFactory;
&nbsp;
&nbsp;import java.io.*;
&nbsp;import java.nio.file.Files;
&nbsp;import java.nio.file.Paths;
&nbsp;import java.time.LocalDate;
&nbsp;import java.time.ZoneId;
&nbsp;import java.util.*;
&nbsp;
&nbsp;public class GtfsStorage {
&nbsp;
<b class="nc">&nbsp;	private static final Logger LOGGER = LoggerFactory.getLogger(GtfsStorage.class);</b>
&nbsp;	private LineIntIndex stopIndex;
&nbsp;	private PtGraph ptGraph;
&nbsp;
&nbsp;	public void setStopIndex(LineIntIndex stopIndex) {
<b class="nc">&nbsp;		this.stopIndex = stopIndex;</b>
&nbsp;	}
&nbsp;
&nbsp;	public LineIntIndex getStopIndex() {
<b class="nc">&nbsp;		return stopIndex;</b>
&nbsp;	}
&nbsp;
&nbsp;    public PtGraph getPtGraph() {
<b class="nc">&nbsp;        return ptGraph;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setPtGraph(PtGraph ptGraph) {
<b class="nc">&nbsp;        this.ptGraph = ptGraph;</b>
&nbsp;    }
&nbsp;
&nbsp;	public IntObjectHashMap&lt;int[]&gt; getSkippedEdgesForTransfer() {
<b class="nc">&nbsp;		return skippedEdgesForTransfer;</b>
&nbsp;	}
&nbsp;
&nbsp;	public static class Validity implements Serializable {
&nbsp;		final BitSet validity;
&nbsp;		final ZoneId zoneId;
&nbsp;		final LocalDate start;
&nbsp;
<b class="nc">&nbsp;		public Validity(BitSet validity, ZoneId zoneId, LocalDate start) {</b>
<b class="nc">&nbsp;			this.validity = validity;</b>
<b class="nc">&nbsp;			this.zoneId = zoneId;</b>
<b class="nc">&nbsp;			this.start = start;</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public boolean equals(Object other) {
<b class="nc">&nbsp;			if (! (other instanceof Validity)) return false;</b>
<b class="nc">&nbsp;			Validity v = (Validity) other;</b>
<b class="nc">&nbsp;			return validity.equals(v.validity) &amp;&amp; zoneId.equals(v.zoneId) &amp;&amp; start.equals(v.start);</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public int hashCode() {
<b class="nc">&nbsp;			return Objects.hash(validity, zoneId, start);</b>
&nbsp;		}
&nbsp;	}
&nbsp;
&nbsp;	static class FeedIdWithTimezone implements Serializable {
&nbsp;		final String feedId;
&nbsp;		final ZoneId zoneId;
&nbsp;
<b class="nc">&nbsp;		FeedIdWithTimezone(String feedId, ZoneId zoneId) {</b>
<b class="nc">&nbsp;			this.feedId = feedId;</b>
<b class="nc">&nbsp;			this.zoneId = zoneId;</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public boolean equals(Object other) {
<b class="nc">&nbsp;			if (! (other instanceof FeedIdWithTimezone)) return false;</b>
<b class="nc">&nbsp;			FeedIdWithTimezone v = (FeedIdWithTimezone) other;</b>
<b class="nc">&nbsp;			return feedId.equals(v.feedId) &amp;&amp; zoneId.equals(v.zoneId);</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public int hashCode() {
<b class="nc">&nbsp;			return Objects.hash(feedId, zoneId);</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	public static class FeedIdWithStopId implements Serializable {
&nbsp;		public final String feedId;
&nbsp;		public final String stopId;
&nbsp;
<b class="nc">&nbsp;		public FeedIdWithStopId(String feedId, String stopId) {</b>
<b class="nc">&nbsp;			this.feedId = feedId;</b>
<b class="nc">&nbsp;			this.stopId = stopId;</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public boolean equals(Object o) {
<b class="nc">&nbsp;			if (this == o) return true;</b>
<b class="nc">&nbsp;			if (o == null || getClass() != o.getClass()) return false;</b>
<b class="nc">&nbsp;			FeedIdWithStopId that = (FeedIdWithStopId) o;</b>
<b class="nc">&nbsp;			return feedId.equals(that.feedId) &amp;&amp;</b>
<b class="nc">&nbsp;					stopId.equals(that.stopId);</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public int hashCode() {
<b class="nc">&nbsp;			return Objects.hash(feedId, stopId);</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public String toString() {
<b class="nc">&nbsp;			return &quot;FeedIdWithStopId{&quot; +</b>
&nbsp;					&quot;feedId=&#39;&quot; + feedId + &#39;\&#39;&#39; +
&nbsp;					&quot;, stopId=&#39;&quot; + stopId + &#39;\&#39;&#39; +
&nbsp;					&#39;}&#39;;
&nbsp;		}
&nbsp;	}
&nbsp;
<b class="nc">&nbsp;	private boolean isClosed = false;</b>
&nbsp;	private Directory dir;
&nbsp;	private Set&lt;String&gt; gtfsFeedIds;
<b class="nc">&nbsp;	private Map&lt;String, GTFSFeed&gt; gtfsFeeds = new HashMap&lt;&gt;();</b>
&nbsp;	private Map&lt;String, Map&lt;String, Fare&gt;&gt; faresByFeed;
&nbsp;	private Map&lt;FeedIdWithStopId, Integer&gt; stationNodes;
&nbsp;	private IntObjectHashMap&lt;int[]&gt; skippedEdgesForTransfer;
&nbsp;
&nbsp;	private IntIntHashMap ptToStreet;
&nbsp;	private IntIntHashMap streetToPt;
&nbsp;
<b class="nc">&nbsp;	public enum EdgeType {</b>
<b class="nc">&nbsp;		HIGHWAY, ENTER_TIME_EXPANDED_NETWORK, LEAVE_TIME_EXPANDED_NETWORK, ENTER_PT, EXIT_PT, HOP, DWELL, BOARD, ALIGHT, OVERNIGHT, TRANSFER, WAIT, WAIT_ARRIVAL</b>
&nbsp;    }
&nbsp;
&nbsp;	private DB data;
&nbsp;
<b class="nc">&nbsp;	GtfsStorage(Directory dir) {</b>
<b class="nc">&nbsp;		this.dir = dir;</b>
&nbsp;	}
&nbsp;
&nbsp;	boolean loadExisting() {
<b class="nc">&nbsp;		File file = new File(dir.getLocation() + &quot;/transit_schedule&quot;);</b>
<b class="nc">&nbsp;		if (!file.exists()) {</b>
<b class="nc">&nbsp;			return false;</b>
&nbsp;		}
<b class="nc">&nbsp;		this.data = DBMaker.newFileDB(file).transactionDisable().mmapFileEnable().readOnly().make();</b>
<b class="nc">&nbsp;		init();</b>
<b class="nc">&nbsp;		for (String gtfsFeedId : this.gtfsFeedIds) {</b>
<b class="nc">&nbsp;			File dbFile = new File(dir.getLocation() + &quot;/&quot; + gtfsFeedId);</b>
&nbsp;
<b class="nc">&nbsp;			if (!dbFile.exists()) {</b>
<b class="nc">&nbsp;				throw new RuntimeException(String.format(&quot;The mapping of the gtfsFeeds in the transit_schedule DB does not reflect the files in %s. &quot;</b>
&nbsp;								+ &quot;dbFile %s is missing.&quot;,
<b class="nc">&nbsp;						dir.getLocation(), dbFile.getName()));</b>
&nbsp;			}
&nbsp;
<b class="nc">&nbsp;			GTFSFeed feed = new GTFSFeed(dbFile);</b>
<b class="nc">&nbsp;			this.gtfsFeeds.put(gtfsFeedId, feed);</b>
&nbsp;		}
<b class="nc">&nbsp;		ptToStreet = deserialize(&quot;pt_to_street&quot;);</b>
<b class="nc">&nbsp;		streetToPt = deserialize(&quot;street_to_pt&quot;);</b>
<b class="nc">&nbsp;		skippedEdgesForTransfer = deserializeIntoIntObjectHashMap(&quot;skipped_edges_for_transfer&quot;);</b>
<b class="nc">&nbsp;		postInit();</b>
<b class="nc">&nbsp;		return true;</b>
&nbsp;	}
&nbsp;
&nbsp;
&nbsp;	private IntIntHashMap deserialize(String filename) {
<b class="nc">&nbsp;		try (FileInputStream in = new FileInputStream(dir.getLocation() + filename)) {</b>
<b class="nc">&nbsp;			ObjectInputStream ois = new ObjectInputStream(new BufferedInputStream(in));</b>
<b class="nc">&nbsp;			int size = ois.readInt();</b>
<b class="nc">&nbsp;			IntIntHashMap result = new IntIntHashMap();</b>
<b class="nc">&nbsp;			for (int i = 0; i &lt; size; i++) {</b>
<b class="nc">&nbsp;				result.put(ois.readInt(), ois.readInt());</b>
&nbsp;			}
<b class="nc">&nbsp;			return result;</b>
<b class="nc">&nbsp;		} catch (IOException e) {</b>
<b class="nc">&nbsp;			throw new RuntimeException(e);</b>
&nbsp;		}
&nbsp;	}
&nbsp;
&nbsp;	private IntObjectHashMap&lt;int[]&gt; deserializeIntoIntObjectHashMap(String filename) {
<b class="nc">&nbsp;		try (FileInputStream in = new FileInputStream(dir.getLocation() + filename)) {</b>
<b class="nc">&nbsp;			ObjectInputStream ois = new ObjectInputStream(new BufferedInputStream(in));</b>
<b class="nc">&nbsp;			int size = ois.readInt();</b>
<b class="nc">&nbsp;			IntObjectHashMap&lt;int[]&gt; result = new IntObjectHashMap&lt;&gt;();</b>
<b class="nc">&nbsp;			for (int i = 0; i &lt; size; i++) {</b>
<b class="nc">&nbsp;				result.put(ois.readInt(), ((int[]) ois.readObject()));</b>
&nbsp;			}
<b class="nc">&nbsp;			return result;</b>
<b class="nc">&nbsp;		} catch (IOException | ClassNotFoundException e) {</b>
<b class="nc">&nbsp;			throw new RuntimeException(e);</b>
&nbsp;		}
&nbsp;	}
&nbsp;
&nbsp;	void create() {
<b class="nc">&nbsp;		this.dir.create();</b>
<b class="nc">&nbsp;		final File file = new File(dir.getLocation() + &quot;/transit_schedule&quot;);</b>
&nbsp;		try {
<b class="nc">&nbsp;			Files.deleteIfExists(file.toPath());</b>
<b class="nc">&nbsp;		} catch (IOException e) {</b>
<b class="nc">&nbsp;			throw new RuntimeException(e);</b>
&nbsp;		}
<b class="nc">&nbsp;		this.data = DBMaker.newFileDB(file).transactionDisable().mmapFileEnable().asyncWriteEnable().make();</b>
<b class="nc">&nbsp;		init();</b>
&nbsp;	}
&nbsp;
&nbsp;    private void init() {
<b class="nc">&nbsp;		this.gtfsFeedIds = data.getHashSet(&quot;gtfsFeeds&quot;);</b>
<b class="nc">&nbsp;		this.stationNodes = data.getHashMap(&quot;stationNodes&quot;);</b>
<b class="nc">&nbsp;		this.ptToStreet = new IntIntHashMap();</b>
<b class="nc">&nbsp;		this.streetToPt = new IntIntHashMap();</b>
<b class="nc">&nbsp;		this.skippedEdgesForTransfer = new IntObjectHashMap&lt;&gt;();</b>
&nbsp;	}
&nbsp;
&nbsp;	void loadGtfsFromZipFileOrDirectory(String id, File zipFileOrDirectory) {
<b class="nc">&nbsp;		File dbFile = new File(dir.getLocation() + &quot;/&quot; + id);</b>
&nbsp;		try {
<b class="nc">&nbsp;			Files.deleteIfExists(dbFile.toPath());</b>
<b class="nc">&nbsp;			GTFSFeed feed = new GTFSFeed(dbFile);</b>
<b class="nc">&nbsp;			feed.loadFromFileAndLogErrors(zipFileOrDirectory);</b>
<b class="nc">&nbsp;			this.gtfsFeeds.put(id, feed);</b>
<b class="nc">&nbsp;		} catch (IOException e) {</b>
<b class="nc">&nbsp;			throw new RuntimeException(e);</b>
&nbsp;		}
<b class="nc">&nbsp;		this.gtfsFeedIds.add(id);</b>
&nbsp;	}
&nbsp;
&nbsp;	// TODO: Refactor initialization
&nbsp;	public void postInit() {
<b class="nc">&nbsp;		LocalDate latestStartDate = LocalDate.ofEpochDay(this.gtfsFeeds.values().stream().mapToLong(f -&gt; f.getStartDate().toEpochDay()).max().getAsLong());</b>
<b class="nc">&nbsp;		LocalDate earliestEndDate = LocalDate.ofEpochDay(this.gtfsFeeds.values().stream().mapToLong(f -&gt; f.getEndDate().toEpochDay()).min().getAsLong());</b>
<b class="nc">&nbsp;		LOGGER.info(&quot;Calendar range covered by all feeds: {} till {}&quot;, latestStartDate, earliestEndDate);</b>
<b class="nc">&nbsp;		faresByFeed = new HashMap&lt;&gt;();</b>
<b class="nc">&nbsp;		this.gtfsFeeds.forEach((feed_id, feed) -&gt; faresByFeed.put(feed_id, feed.fares));</b>
&nbsp;	}
&nbsp;
&nbsp;	public void close() {
<b class="nc">&nbsp;		if (!isClosed) {</b>
<b class="nc">&nbsp;			isClosed = true;</b>
<b class="nc">&nbsp;			data.close();</b>
<b class="nc">&nbsp;			for (GTFSFeed feed : gtfsFeeds.values()) {</b>
<b class="nc">&nbsp;				feed.close();</b>
&nbsp;			}
&nbsp;		}
&nbsp;	}
&nbsp;
&nbsp;	public Map&lt;String, Map&lt;String, Fare&gt;&gt; getFares() {
<b class="nc">&nbsp;		return faresByFeed;</b>
&nbsp;	}
&nbsp;
&nbsp;	public IntIntHashMap getPtToStreet() {
<b class="nc">&nbsp;		return ptToStreet;</b>
&nbsp;	}
&nbsp;
&nbsp;	public IntIntHashMap getStreetToPt() {
<b class="nc">&nbsp;		return streetToPt;</b>
&nbsp;	}
&nbsp;
&nbsp;	public Map&lt;String, GTFSFeed&gt; getGtfsFeeds() {
<b class="nc">&nbsp;		return Collections.unmodifiableMap(gtfsFeeds);</b>
&nbsp;	}
&nbsp;
&nbsp;	public Map&lt;FeedIdWithStopId, Integer&gt; getStationNodes() {
<b class="nc">&nbsp;		return stationNodes;</b>
&nbsp;	}
&nbsp;
&nbsp;	public void flush() {
<b class="nc">&nbsp;		serialize(&quot;pt_to_street&quot;, ptToStreet);</b>
<b class="nc">&nbsp;		serialize(&quot;street_to_pt&quot;, streetToPt);</b>
<b class="nc">&nbsp;		serialize(&quot;skipped_edges_for_transfer&quot;, skippedEdgesForTransfer);</b>
&nbsp;	}
&nbsp;
&nbsp;	private void serialize(String filename, IntObjectHashMap&lt;int[]&gt; data) {
<b class="nc">&nbsp;		try (ObjectOutputStream oos = new ObjectOutputStream(new BufferedOutputStream(Files.newOutputStream(Paths.get(dir.getLocation() + filename))))) {</b>
<b class="nc">&nbsp;			oos.writeInt(data.size());</b>
<b class="nc">&nbsp;			for (IntObjectCursor&lt;int[]&gt; e : data) {</b>
<b class="nc">&nbsp;				oos.writeInt(e.key);</b>
<b class="nc">&nbsp;				oos.writeObject(e.value);</b>
&nbsp;			}
<b class="nc">&nbsp;		} catch (IOException e) {</b>
<b class="nc">&nbsp;			throw new RuntimeException(e);</b>
&nbsp;		}
&nbsp;	}
&nbsp;
&nbsp;	private void serialize(String filename, IntIntHashMap data) {
<b class="nc">&nbsp;		try (ObjectOutputStream oos = new ObjectOutputStream(new BufferedOutputStream(Files.newOutputStream(Paths.get(dir.getLocation() + filename))))) {</b>
<b class="nc">&nbsp;			oos.writeInt(data.size());</b>
<b class="nc">&nbsp;			for (IntIntCursor e : data) {</b>
<b class="nc">&nbsp;				oos.writeInt(e.key);</b>
<b class="nc">&nbsp;				oos.writeInt(e.value);</b>
&nbsp;			}
<b class="nc">&nbsp;		} catch (IOException e) {</b>
<b class="nc">&nbsp;			throw new RuntimeException(e);</b>
&nbsp;		}
&nbsp;	}
&nbsp;
<b class="nc">&nbsp;	public abstract static class PlatformDescriptor implements Serializable {</b>
&nbsp;		public String feed_id;
&nbsp;		public String stop_id;
&nbsp;
&nbsp;		public static PlatformDescriptor route(String feed_id, String stop_id, String route_id) {
<b class="nc">&nbsp;			RoutePlatform routePlatform = new RoutePlatform();</b>
<b class="nc">&nbsp;			routePlatform.feed_id = feed_id;</b>
<b class="nc">&nbsp;			routePlatform.stop_id = stop_id;</b>
<b class="nc">&nbsp;			routePlatform.route_id = route_id;</b>
<b class="nc">&nbsp;			return routePlatform;</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public boolean equals(Object o) {
<b class="nc">&nbsp;			if (this == o) return true;</b>
<b class="nc">&nbsp;			if (o == null || getClass() != o.getClass()) return false;</b>
<b class="nc">&nbsp;			PlatformDescriptor that = (PlatformDescriptor) o;</b>
<b class="nc">&nbsp;			return Objects.equals(feed_id, that.feed_id) &amp;&amp;</b>
<b class="nc">&nbsp;					Objects.equals(stop_id, that.stop_id);</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public int hashCode() {
<b class="nc">&nbsp;			return Objects.hash(feed_id, stop_id);</b>
&nbsp;		}
&nbsp;
&nbsp;		public static RouteTypePlatform routeType(String feed_id, String stop_id, int route_type) {
<b class="nc">&nbsp;			RouteTypePlatform routeTypePlatform = new RouteTypePlatform();</b>
<b class="nc">&nbsp;			routeTypePlatform.feed_id = feed_id;</b>
<b class="nc">&nbsp;			routeTypePlatform.stop_id = stop_id;</b>
<b class="nc">&nbsp;			routeTypePlatform.route_type = route_type;</b>
<b class="nc">&nbsp;			return routeTypePlatform;</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
<b class="nc">&nbsp;	public static class RoutePlatform extends PlatformDescriptor {</b>
&nbsp;		String route_id;
&nbsp;
&nbsp;		@Override
&nbsp;		public String toString() {
<b class="nc">&nbsp;			return &quot;RoutePlatform{&quot; +</b>
&nbsp;					&quot;feed_id=&#39;&quot; + feed_id + &#39;\&#39;&#39; +
&nbsp;					&quot;, stop_id=&#39;&quot; + stop_id + &#39;\&#39;&#39; +
&nbsp;					&quot;, route_id=&#39;&quot; + route_id + &#39;\&#39;&#39; +
&nbsp;					&#39;}&#39;;
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public boolean equals(Object o) {
<b class="nc">&nbsp;			if (this == o) return true;</b>
<b class="nc">&nbsp;			if (o == null || getClass() != o.getClass()) return false;</b>
<b class="nc">&nbsp;			if (!super.equals(o)) return false;</b>
<b class="nc">&nbsp;			RoutePlatform that = (RoutePlatform) o;</b>
<b class="nc">&nbsp;			return route_id.equals(that.route_id);</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public int hashCode() {
<b class="nc">&nbsp;			return Objects.hash(super.hashCode(), route_id);</b>
&nbsp;		}
&nbsp;	}
&nbsp;
<b class="nc">&nbsp;	public static class RouteTypePlatform extends PlatformDescriptor {</b>
&nbsp;		int route_type;
&nbsp;
&nbsp;		@Override
&nbsp;		public boolean equals(Object o) {
<b class="nc">&nbsp;			if (this == o) return true;</b>
<b class="nc">&nbsp;			if (o == null || getClass() != o.getClass()) return false;</b>
<b class="nc">&nbsp;			if (!super.equals(o)) return false;</b>
<b class="nc">&nbsp;			RouteTypePlatform that = (RouteTypePlatform) o;</b>
<b class="nc">&nbsp;			return route_type == that.route_type;</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public int hashCode() {
<b class="nc">&nbsp;			return Objects.hash(super.hashCode(), route_type);</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public String toString() {
<b class="nc">&nbsp;			return &quot;RouteTypePlatform{&quot; +</b>
&nbsp;					&quot;feed_id=&#39;&quot; + feed_id + &#39;\&#39;&#39; +
&nbsp;					&quot;, stop_id=&#39;&quot; + stop_id + &#39;\&#39;&#39; +
&nbsp;					&quot;, route_type=&quot; + route_type +
&nbsp;					&#39;}&#39;;
&nbsp;		}
&nbsp;	}
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-09-30 17:20</div>
</div>
</body>
</html>
